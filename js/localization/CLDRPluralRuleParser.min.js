(function(a,b){if(typeof define==="function"&&define.amd){define(b)}else{if(typeof exports==="object"){module.exports=b()}else{a.pluralRuleParser=b()}}}(this,function(){function a(ag,ai){ag=ag.split("@")[0].replace(/^\s*/,"").replace(/\s*$/,"");if(!ag.length){return true}var I=0,b,B,x,r,F=S(/^\s+/),R=S(/^\d+/),e=K("n"),N=K("i"),M=K("f"),h=K("t"),D=K("v"),j=K("w"),p=K("is"),s=K("is not"),J=K("!="),ah=K("="),m=K("mod"),g=K("%"),z=K("not"),ae=K("in"),V=K("within"),T=K(".."),u=K(","),af=K("or"),y=K("and");function A(){}A("pluralRuleParser",ag,ai);function L(f){return function(){var t,n;for(t=0;t<f.length;t++){n=f[t]();if(n!==null){return n}}return null}}function ab(v){var t,w,n=I,f=[];for(t=0;t<v.length;t++){w=v[t]();if(w===null){I=n;return null}f.push(w)}return f}function q(i,f){return function(){var t=I,n=[],v=f();while(v!==null){n.push(v);v=f()}if(n.length<i){I=t;return null}return n}}function K(i){var f=i.length;return function(){var n=null;if(ag.substr(I,f)===i){n=i;I+=f}return n}}function S(f){return function(){var i=ag.substr(I).match(f);if(i===null){return null}I+=i[0].length;return i[0]}}function aa(){var f=N();if(f===null){A(" -- failed i",parseInt(ai,10));return f}f=parseInt(ai,10);A(" -- passed i ",f);return f}function Z(){var f=e();if(f===null){A(" -- failed n ",ai);return f}f=parseFloat(ai,10);A(" -- passed n ",f);return f}function ac(){var f=M();if(f===null){A(" -- failed f ",ai);return f}f=(ai+".").split(".")[1]||0;A(" -- passed f ",f);return f}function Q(){var f=h();if(f===null){A(" -- failed t ",ai);return f}f=(ai+".").split(".")[1].replace(/0$/,"")||0;A(" -- passed t ",f);return f}function P(){var f=D();if(f===null){A(" -- failed v ",ai);return f}f=(ai+".").split(".")[1].length||0;A(" -- passed v ",f);return f}function O(){var f=j();if(f===null){A(" -- failed w ",ai);return f}f=(ai+".").split(".")[1].replace(/0$/,"").length||0;A(" -- passed w ",f);return f}b=L([Z,aa,ac,Q,P,O]);B=L([d,b]);function d(){var f=ab([b,F,L([m,g]),F,R]);if(f===null){A(" -- failed mod");return null}A(" -- passed "+parseInt(f[0],10)+" "+f[2]+" "+parseInt(f[4],10));return parseFloat(f[0])%parseInt(f[4],10)}function X(){var f=ab([F,z]);if(f===null){A(" -- failed not");return null}return f[1]}function E(){var f=ab([B,F,L([p]),F,R]);if(f!==null){A(" -- passed is : "+f[0]+" == "+parseInt(f[4],10));return f[0]===parseInt(f[4],10)}A(" -- failed is");return null}function o(){var f=ab([B,F,L([s,J]),F,R]);if(f!==null){A(" -- passed isnot: "+f[0]+" != "+parseInt(f[4],10));return f[0]!==parseInt(f[4],10)}A(" -- failed isnot");return null}function H(){var n,t,f=ab([B,F,J,F,l]);if(f!==null){A(" -- passed not_in: "+f[0]+" != "+f[4]);t=f[4];for(n=0;n<t.length;n++){if(parseInt(t[n],10)===parseInt(f[0],10)){return false}}return true}A(" -- failed not_in");return null}function l(){var f=ab([L([k,R]),q(0,U)]),i=[];if(f!==null){i=i.concat(f[0]);if(f[1][0]){i=i.concat(f[1][0])}return i}A(" -- failed rangeList");return null}function U(){var f=ab([u,l]);if(f!==null){return f[1]}A(" -- failed rangeTail");return null}function k(){var t,w,v,n,f=ab([R,T,R]);if(f!==null){A(" -- passed range");w=[];v=parseInt(f[0],10);n=parseInt(f[2],10);for(t=v;t<=n;t++){w.push(t)}return w}A(" -- failed range");return null}function G(){var f,t,n;f=ab([B,q(0,X),F,L([ae,ah]),F,l]);if(f!==null){A(" -- passed _in:"+f);t=f[5];for(n=0;n<t.length;n++){if(parseInt(t[n],10)===parseFloat(f[0])){return(f[1][0]!=="not")}}return(f[1][0]==="not")}A(" -- failed _in ");return null}function Y(){var i,f;f=ab([B,q(0,X),F,V,F,l]);if(f!==null){A(" -- passed within");i=f[5];if((f[0]>=parseInt(i[0],10))&&(f[0]<parseInt(i[i.length-1],10))){return(f[1][0]!=="not")}return(f[1][0]==="not")}A(" -- failed within ");return null}x=L([E,H,o,G,Y]);function W(){var n,f=ab([x,q(0,C)]);if(f){if(!f[0]){return false}for(n=0;n<f[1].length;n++){if(!f[1][n]){return false}}return true}A(" -- failed and");return null}function C(){var f=ab([F,y,F,x]);if(f!==null){A(" -- passed andTail"+f);return f[3]}A(" -- failed andTail");return null}function ad(){var f=ab([F,af,F,W]);if(f!==null){A(" -- passed orTail: "+f[3]);return f[3]}A(" -- failed orTail");return null}function c(){var n,f=ab([W,q(0,ad)]);if(f){for(n=0;n<f[1].length;n++){if(f[1][n]){return true}}return f[0]}return false}r=c();if(r===null){throw new Error("Parse error at position "+I.toString()+" for rule: "+ag)}if(I!==ag.length){A("Warning: Rule not parsed completely. Parser stopped at "+ag.substr(0,I)+" for rule: "+ag)}return r}return a}));