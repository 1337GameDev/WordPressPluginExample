(function(b){if(typeof module==="object"&&typeof module.exports==="object"){var a=b(require,exports);if(a!==undefined){module.exports=a}}else{if(typeof define==="function"&&define.amd){define(["require","exports","jquery","./Classes/Helper","./Classes/TypeChecker"],b)}}})(function(d,b){Object.defineProperty(b,"__esModule",{value:true});var a=d("jquery");var f=d("./Classes/Helper");var e=d("./Classes/TypeChecker");var c;(function(j){var i=false;function k(){if(i){return}d(["css!modules/Greenify/css/Greenify"]);i=true}var g=(function(){function l(n,m,o,p){if(n===void 0){n=l.getDefaults().color}if(m===void 0){m=l.getDefaults().backgroundColor}if(o===void 0){o=l.getDefaults().returnJQuery}if(p===void 0){p=l.getDefaults().loadCSS}this.color=n;this.backgroundColor=m;this.returnJQuery=o;this.loadCSS=p}l.getDefaults=function(){return new j.GreenifyOptions("#00FF00","#000000",false,true)};return l}());j.GreenifyOptions=g;var h=(function(){function l(n,m){this.deleted=false;this.originalElementState={};this.exposedMethods=null;this.exposedMethods={Defaults:j.GreenifyOptions.getDefaults,Destroy:this.Destroy,TestMethod:this.TestMethod};this.element=n;var o=j.GreenifyOptions.getDefaults();m=a.extend({},o,m);this.options=m;if(this.options.loadCSS&&i){k()}this.OnCreate()}l.prototype.Call=function(m){if(this.deleted){return}if(this.exposedMethods[m]){return this.exposedMethods[m].apply(this,Array.prototype.slice.call(arguments,1))}else{a.error("Method "+m+" does not exist on jQuery."+j.Greenify.pluginName)}};l.prototype.TestMethod=function(m){if(this.deleted){return}console.log("TestMethod called with value:"+m)};l.prototype.AttachHandlers=function(){if(this.deleted){return}var m=this;this.element.on("DOMNodeRemoved",function(){m.Destroy()})};l.prototype.RemoveHandlers=function(){if(this.deleted){return}this.element.off("DOMNodeRemoved")};l.prototype.OnCreate=function(){if(this.deleted){return}this.saveElementState();this.element.addClass("greenify");this.element.css("color",this.options.color).css("background-color",this.options.backgroundColor);this.AttachHandlers()};l.prototype.Destroy=function(){if(this.deleted){return}this.RemoveHandlers();this.restoreElementState();this.element.removeData(j.Greenify.dataKey);for(var m in this){if(this.hasOwnProperty(m)){delete this[m]}}this.deleted=true};l.prototype.saveElementState=function(){if(this.deleted){return}this.originalElementState.color=this.element.css("color");this.originalElementState["background-color"]=this.element.css("background-color")};l.prototype.restoreElementState=function(){if(this.deleted){return}this.element.css("color",this.originalElementState.color).css("background-color",this.originalElementState["background-color"]);this.element.removeClass("greenify")};l.ElementHasInstance=function(n){var m=f.Helper.GetDataIfPresent(n,j.Greenify.dataKey,j.Greenify);return(m!==null)};l.GetFactory=function(m){return{GetInstance:function(n){if(!n.Greenify){var o=j.Greenify.AttachToJQuery(a);n=o(n)}return n.Greenify(m)}}};l.Create=function(n,m){return j.Greenify.GetFactory(m).GetInstance(n)};l.AttachToJQuery=function(m){if(!m){return null}if(m.fn.hasOwnProperty("Greenify")){return m}m.fn.extend({Greenify:function(p){var s=((typeof p!=="undefined")&&p.hasOwnProperty("returnJQuery")&&p.returnJQuery);if(p&&e.TypeChecker.isString(p)&&j.Greenify.ElementHasInstance(this)){var n=f.Helper.GetDataIfPresent(this,j.Greenify.dataKey,j.Greenify);n.Call.apply(n,arguments)}else{var r=function(u){var t=null;if(j.Greenify.ElementHasInstance(u)){t=f.Helper.GetDataIfPresent(u,j.Greenify.dataKey,j.Greenify)}else{t=new j.Greenify(u,p);u.data(j.Greenify.dataKey,t)}return t};var o=[];var q=this.each(function(){var t=m(this);o.push(r(t))});return(s?q:(o.length===1?o[0]:o))}}});return m};l.RemoveFromJQuery=function(m){if(!m){return null}if(!m.fn.hasOwnProperty("Greenify")){return m}delete m.fn.Greenify;return m};l.pluginName="Greenify";l.dataKey="greenify";return l}());j.Greenify=h})(c=b.Visuals||(b.Visuals={}));c.Greenify.AttachToJQuery(a)});