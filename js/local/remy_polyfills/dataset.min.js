(function(){var e=[].forEach,i=/^data-(.+)/,b=/\-([a-z])/ig,a=document.createElement("div"),c=false,d;function j(){c=true;this.removeEventListener("DOMAttrModified",j,false)}function h(k){return k.replace(b,function(n,o){return o.toUpperCase()})}function f(){var k={};e.call(this.attributes,function(l){if(d=l.name.match(i)){k[h(d[1])]=l.value}});return k}if(a.dataset!=undefined){return}a.addEventListener("DOMAttrModified",j,false);a.setAttribute("foo","bar");function g(l,m,k){if(Object.defineProperty){Object.defineProperty(l,m,{get:k})}else{l.__defineGetter__(m,k)}}g(Element.prototype,"dataset",c?function(){if(!this._datasetCache){this._datasetCache=f.call(this)}return this._datasetCache}:f);document.addEventListener("DOMAttrModified",function(k){delete k.target._datasetCache},false)})();