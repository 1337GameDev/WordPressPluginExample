(function(){function b(e){var f=document.createEvent("HTMLEvents");f.initEvent(e,true,true);f.eventName=e;(document.body||window).dispatchEvent(f)}function c(){var g=new XMLHttpRequest();g.open("HEAD","/",false);try{g.send();d=true}catch(f){d=false}return d}var d=true,a=true;navigator.__defineGetter__("onLine",c);c();if(d===false){a=false;b("offline")}setInterval(function(){c();if(d!==a){b(d?"online":"offline");a=d}},5000)})();